/*
jQuery Waypoints - v1.1.7
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
(function(a,b,c,d,e){var f=a(d),g="waypoint.reached",h=function(a,c){a.element.trigger(g,c),a.options.triggerOnce&&a.element[b]("destroy")},i=function(a,b){if(!b)return-1;var c=b.waypoints.length-1;while(c>=0&&b.waypoints[c].element[0]!==a[0])c-=1;return c},j=[],k=function(b){a.extend(this,{element:a(b),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:a.proxy(function(){var b=this.element.scrollTop(),d=b>this.oldScroll,e=this,f=a.grep(this.waypoints,function(a,c){return d?a.offset>e.oldScroll&&a.offset<=b:a.offset<=e.oldScroll&&a.offset>b}),g=f.length;(!this.oldScroll||!b)&&a[c]("refresh"),this.oldScroll=b;if(!g)return;d||f.reverse(),a.each(f,function(a,b){(b.options.continuous||a===g-1)&&h(b,[d?"down":"up"])})},this)}),a(b).bind("scroll.waypoints",a.proxy(function(){this.didScroll||(this.didScroll=!0,d.setTimeout(a.proxy(function(){this.doScroll(),this.didScroll=!1},this),a[c].settings.scrollThrottle))},this)).bind("resize.waypoints",a.proxy(function(){this.didResize||(this.didResize=!0,d.setTimeout(a.proxy(function(){a[c]("refresh"),this.didResize=!1},this),a[c].settings.resizeThrottle))},this)),f.load(a.proxy(function(){this.doScroll()},this))},l=function(b){var c=null;return a.each(j,function(a,d){if(d.element[0]===b)return c=d,!1}),c},m={init:function(d,e){return this.each(function(){var f=a.fn[b].defaults.context,h,m=a(this);e&&e.context&&(f=e.context),a.isWindow(f)||(f=m.closest(f)[0]),h=l(f),h||(h=new k(f),j.push(h));var n=i(m,h),p=n<0?a.fn[b].defaults:h.waypoints[n].options,q=a.extend({},p,e);q.offset=q.offset==="bottom-in-view"?function(){var b=a.isWindow(f)?a[c]("viewportHeight"):a(f).height();return b-a(this).outerHeight()}:q.offset,n<0?h.waypoints.push({element:m,offset:null,options:q}):h.waypoints[n].options=q,d&&m.bind(g,d),e&&e.handler&&m.bind(g,e.handler)}),a[c]("refresh"),this},remove:function(){return this.each(function(b,c){var d=a(c);a.each(j,function(a,b){var c=i(d,b);c>=0&&(b.waypoints.splice(c,1),b.waypoints.length||(b.element.unbind("scroll.waypoints resize.waypoints"),j.splice(a,1)))})})},destroy:function(){return this.unbind(g)[b]("remove")}},n={refresh:function(){a.each(j,function(b,d){var e=a.isWindow(d.element[0]),f=e?0:d.element.offset().top,g=e?a[c]("viewportHeight"):d.element.height(),i=e?0:d.element.scrollTop();a.each(d.waypoints,function(a,b){if(!b)return;var c=b.options.offset,e=b.offset;if(typeof b.options.offset=="function")c=b.options.offset.apply(b.element);else if(typeof b.options.offset=="string"){var j=parseFloat(b.options.offset);c=b.options.offset.indexOf("%")?Math.ceil(g*(j/100)):j}b.offset=b.element.offset().top-f+i-c;if(b.options.onlyOnScroll)return;e!==null&&d.oldScroll>e&&d.oldScroll<=b.offset?h(b,["up"]):e!==null&&d.oldScroll<e&&d.oldScroll>=b.offset?h(b,["down"]):!e&&d.element.scrollTop()>b.offset&&h(b,["down"])}),d.waypoints.sort(function(a,b){return a.offset-b.offset})})},viewportHeight:function(){return d.innerHeight?d.innerHeight:f.height()},aggregate:function(){var b=a();return a.each(j,function(c,d){a.each(d.waypoints,function(a,c){b=b.add(c.element)})}),b}};a.fn[b]=function(c){if(m[c])return m[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="function"||!c)return m.init.apply(this,arguments);if(typeof c=="object")return m.init.apply(this,[null,c]);a.error("Method "+c+" does not exist on jQuery "+b)},a.fn[b].defaults={continuous:!0,offset:0,triggerOnce:!1,context:d},a[c]=function(a){return n[a]?n[a].apply(this):n.aggregate()},a[c].settings={resizeThrottle:200,scrollThrottle:100},f.load(function(){a[c]("refresh")})})(jQuery,"waypoint","waypoints",window);